# Use the official Debian slim image for a smaller footprint
FROM debian:bullseye-slim

# Set environment variables for non-interactive installations
ENV DEBIAN_FRONTEND=noninteractive

# Install required packages: libc6-dev for pthread and time functions
RUN apt-get update && apt-get install -y --no-install-recommends \
	build-essential \
	libc6-dev \
	libreadline-dev \
	valgrind \
	make \
	gdb \
	git \
	python3 \
	python3-pip \
	&& apt-get clean && rm -rf /var/lib/apt/lists/*

# Upgrade pip and setuptools, and install norminette
RUN python3 -m pip install --upgrade pip setuptools && \
	python3 -m pip install norminette

# Set the working directory in the container
WORKDIR /app

# Copy project files into the container
COPY . .

# Specify the default command (can be overridden)
CMD ["make"]
